yaml
name: Build and Analyze
on:
 push:
 branches:
 - master
 pull_request:
 branches:
 - master
jobs:
 build:
 name: Build and SonarCloud Scan
 runs-on: ubuntu-latest
 steps:
 - name: Checkout code
 uses: actions/checkout@v3
 with:
 fetch-depth: 0
 - name: Set up JDK 17
 uses: actions/setup-java@v3
 with:
 distribution: 'temurin'
 java-version: '17'
 - name: Cache Maven packages
 uses: actions/cache@v3
 with:
 path: ~/.m2
 key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}
 restore-keys: |
 ${{ runner.os }}-maven-
 - name: Build with Maven
 run: mvn -B verify --file pom.xml
 - name: SonarCloud Scan
 uses: SonarSource/sonarcloud-github-action@master
 with:
 args: >
 -Dsonar.projectKey=your-org-name_repo-name
 -Dsonar.organization=your-org-name
 env:
 GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
 SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
